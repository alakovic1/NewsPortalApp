{"ast":null,"code":"var _jsxFileName = \"/Users/amilalakovic/Desktop/untitled folder 3/my-app/src/components/Prijava.js\";\nimport React, { useState } from \"react\";\nimport \"../css/Prijava.css\";\nimport { Form, Input, Button, Checkbox, Alert } from \"antd\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons\";\nimport { useHistory } from \"react-router-dom\";\nimport { saveUserToken, saveUserData } from \"../utilities/Common\";\nimport axios from \"axios\";\n\nfunction Prijava() {\n  const history = useHistory();\n  const [warning, setWarning] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const hideWarning = () => {\n    setWarning(false);\n  };\n\n  const onFinish = values => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }; // Send login request\n\n    axios.post(\"https://payment-server-si.herokuapp.com/api/auth/signin\", {\n      usernameOrEmail: values.email,\n      password: values.password\n    }, config).then(response => {\n      // Save user token to local storage\n      saveUserToken(response.data.accessToken, response.data.tokenType); // setToken({token: response.data.accessToken})\n\n      return response.data;\n    }).then(data => {\n      const accessToken = data.tokenType + \" \" + data.accessToken; // Send get user data request\n\n      return axios.get(\"https://payment-server-si.herokuapp.com/api/auth/user/me\", {\n        headers: {\n          Authorization: accessToken\n        }\n      });\n    }).then(response => {\n      //Create user object\n      let user = {\n        firstName: response.data.firstName,\n        lastName: response.data.lastName,\n        username: response.data.username,\n        email: response.data.email\n      };\n      console.log(response); // Save user object to storage\n\n      saveUserData(user); // setUser(user)\n\n      console.log(\"Login successful\");\n    }).then(() => {\n      history.push(\"/pocetna\");\n    }).catch(error => {\n      // if (error.response.data.path == \"/api/auth/signin\") {\n      // }\n      setWarning(true);\n\n      if (error.response == null) {\n        console.log(\"No internet\");\n        setError(\"No internet\");\n        return;\n      }\n\n      if (error.response.status === 401) {\n        setError(\"Wrong username or password!\");\n        console.log(\"Wrong username or password/Auth error\", error.response);\n      } else console.log(error.response.data.message);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"split left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"split loginContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tekst\",\n    style: {\n      color: \"black\",\n      fontSize: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, \"Payment dashboard, made for you!\"), /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      color: \"gray\",\n      fontSize: \"16px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, \"Organize your bank accounts and transactions all in one place.\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    className: \"login-form\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"email\",\n    rules: [{\n      required: true,\n      message: \"Please input your username or email!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    prefix: /*#__PURE__*/React.createElement(UserOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }\n    }),\n    placeholder: \"Username or Email\",\n    onChange: hideWarning,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: \"Please input your Password!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    prefix: /*#__PURE__*/React.createElement(LockOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }\n    }),\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: hideWarning,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  })), warning ? /*#__PURE__*/React.createElement(Alert, {\n    message: \"Error\",\n    description: error,\n    type: \"error\",\n    style: {\n      marginBottom: \"10px\"\n    },\n    showIcon: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }) : null, /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"login-forgot-password-link\",\n    href: \"/oporavkaLozinke\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }, \"Forgot password?\")), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    className: \"login-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, \"Log in\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, \" \", \"Or\", \" \", /*#__PURE__*/React.createElement(\"a\", {\n    className: \"login-register-link\",\n    href: \"/registracija\",\n    key: \"register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, \"register now!\"), \" \"))))));\n}\n\nexport default Prijava;","map":{"version":3,"sources":["/Users/amilalakovic/Desktop/untitled folder 3/my-app/src/components/Prijava.js"],"names":["React","useState","Form","Input","Button","Checkbox","Alert","UserOutlined","LockOutlined","useHistory","saveUserToken","saveUserData","axios","Prijava","history","warning","setWarning","error","setError","hideWarning","onFinish","values","config","headers","post","usernameOrEmail","email","password","then","response","data","accessToken","tokenType","get","Authorization","user","firstName","lastName","username","console","log","push","catch","status","message","color","fontSize","remember","required","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport \"../css/Prijava.css\";\nimport { Form, Input, Button, Checkbox, Alert } from \"antd\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons\";\nimport { useHistory } from \"react-router-dom\";\nimport { saveUserToken, saveUserData } from \"../utilities/Common\";\nimport axios from \"axios\";\n\nfunction Prijava() {\n  const history = useHistory();\n  const [warning, setWarning] = useState(false);\n  const [error, setError] = useState(\"\");\n  const hideWarning = () => {\n    setWarning(false);\n  };\n  const onFinish = (values) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    // Send login request\n    axios\n      .post(\n        \"https://payment-server-si.herokuapp.com/api/auth/signin\",\n        {\n          usernameOrEmail: values.email,\n          password: values.password,\n        },\n        config\n      )\n      .then((response) => {\n        // Save user token to local storage\n        saveUserToken(response.data.accessToken, response.data.tokenType);\n        // setToken({token: response.data.accessToken})\n        return response.data;\n      })\n      .then((data) => {\n        const accessToken = data.tokenType + \" \" + data.accessToken;\n        // Send get user data request\n        return axios.get(\n          \"https://payment-server-si.herokuapp.com/api/auth/user/me\",\n          {\n            headers: {\n              Authorization: accessToken,\n            },\n          }\n        );\n      })\n      .then((response) => {\n        //Create user object\n        let user = {\n          firstName: response.data.firstName,\n          lastName: response.data.lastName,\n          username: response.data.username,\n          email: response.data.email,\n        };\n\n        console.log(response);\n\n        // Save user object to storage\n        saveUserData(user);\n        // setUser(user)\n        console.log(\"Login successful\");\n      })\n      .then(() => {\n        history.push(\"/pocetna\");\n      })\n      .catch((error) => {\n        // if (error.response.data.path == \"/api/auth/signin\") {\n        // }\n        setWarning(true);\n        if (error.response == null) {\n          console.log(\"No internet\");\n          setError(\"No internet\");\n          return;\n        }\n        if (error.response.status === 401) {\n          setError(\"Wrong username or password!\");\n          console.log(\"Wrong username or password/Auth error\", error.response);\n        } else console.log(error.response.data.message);\n      });\n  };\n\n  return (\n    <div>\n      <div className=\"split left\">\n        <div></div>\n      </div>\n      <div className=\"split loginContainer\">\n        <h1 className=\"tekst\" style={{ color: \"black\", fontSize: \"30px\" }}>\n          Payment dashboard, made for you!\n        </h1>\n        <h2 style={{ color: \"gray\", fontSize: \"16px\" }}>\n          Organize your bank accounts and transactions all in one place.\n        </h2>\n        <div>\n          <Form\n            className=\"login-form\"\n            initialValues={{\n              remember: true,\n            }}\n            onFinish={onFinish}\n          >\n            <Form.Item\n              name=\"email\"\n              rules={[\n                {\n                  required: true,\n                  message: \"Please input your username or email!\",\n                },\n              ]}\n            >\n              <Input\n                prefix={<UserOutlined />}\n                placeholder=\"Username or Email\"\n                onChange={hideWarning}\n              />\n            </Form.Item>\n\n            <Form.Item\n              name=\"password\"\n              rules={[\n                {\n                  required: true,\n                  message: \"Please input your Password!\",\n                },\n              ]}\n            >\n              <Input\n                prefix={<LockOutlined />}\n                type=\"password\"\n                placeholder=\"Password\"\n                onChange={hideWarning}\n              />\n            </Form.Item>\n            {warning ? (\n              <Alert\n                message=\"Error\"\n                description={error}\n                type=\"error\"\n                style={{ marginBottom: \"10px\" }}\n                showIcon\n              />\n            ) : null}\n            <Form.Item>\n              {/* <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\n                <Checkbox className=\"login-remember-checkbox\">\n                  Remember me\n                </Checkbox>\n              </Form.Item> */}\n              <a className=\"login-forgot-password-link\" href=\"/oporavkaLozinke\">\n                Forgot password?\n              </a>\n            </Form.Item>\n\n            <Form.Item>\n              <Button type=\"primary\" htmlType=\"submit\" className=\"login-button\">\n                Log in\n              </Button>\n              <p>\n                {\" \"}\n                Or{\" \"}\n                <a\n                  className=\"login-register-link\"\n                  href=\"/registracija\"\n                  key=\"register\"\n                >\n                  register now!\n                </a>{\" \"}\n              </p>\n            </Form.Item>\n          </Form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Prijava;\n"]},"metadata":{},"sourceType":"module"}